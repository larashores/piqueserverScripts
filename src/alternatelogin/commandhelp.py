"""Originally by learn_moreModified to work with defaultcommands.py"""from commands import add, admin, commands as cmdlist, aliases as aliaslistimport fnmatchdef commands(connection, value = None):	names = []	for command in cmdlist:		command_func = cmdlist[command]		if (command not in connection.rights) and (command not in connection.protocol.defaultcommands):			continue		include = False		if value is None or fnmatch.fnmatch(command, value):			include = True		aliases = []		for a in aliaslist:			if aliaslist[a] == command:				if value is None or fnmatch.fnmatch(a, value):					include = True				aliases.append(a)		cmd = command if len(aliases) == 0 else ('%s (%s)' % (command, ', '.join(aliases)))		if include:			names.append(cmd)	return 'Commands: %s' % (', '.join(names))add(commands)def apply_script(protocol, connection, config):	return protocol, connection